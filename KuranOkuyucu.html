<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kuran Okuyucu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="faith_groups_data.js"></script>

    <script src="gender_data.js"></script>
    <script src="animals_data.js"></script>
    <script src="minerals_data.js"></script>
    <script src="haram_helal_data.js"></script>
    <script src="akil_namaz_data.js"></script>
    <style>
        :root {
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --primary: #2c3e50;
            --accent: #27ae60;
            --text-main: #333333;
            --text-secondary: #666666;
            --border-color: #eee;
            --panel-border: #f1c40f;
            --border-radius: 12px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            --arabic-color: #000000;
        }

        body.night-mode {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --primary: #ecf0f1;
            --accent: #2ecc71;
            --text-main: #e0e0e0;
            --text-secondary: #aaaaaa;
            --border-color: #333333;
            --panel-border: #d4af37;
            --shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            --arabic-color: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background-color 0.3s, color 0.3s;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .theme-toggle {
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-main);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            margin-bottom: 15px;
        }

        .theme-toggle:hover {
            border-color: var(--accent);
        }

        .controls {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            width: 100%;
            max-width: 600px;
            display: flex;
            justify-content: center;
        }

        select {
            padding: 10px 15px;
            font-size: 16px;
            border: 2px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-main);
            border-radius: 8px;
            outline: none;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }

        select:focus {
            border-color: var(--accent);
        }

        #contentArea {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .verse-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border-right: 5px solid var(--accent);
            transition: transform 0.2s;
        }

        .arabic-line {
            font-size: 32px;
            direction: rtl;
            text-align: right;
            margin-bottom: 15px;
            line-height: 1.8;
            color: var(--arabic-color);
        }

        .turkish-line {
            font-size: 18px;
            color: var(--text-secondary);
            line-height: 1.6;
            border-top: 1px solid var(--border-color);
            padding-top: 15px;
        }

        .verse-number {
            font-weight: bold;
            color: var(--accent);
            margin-right: 10px;
        }

        #loadingSpinner {
            display: none;
            margin: 20px auto;
            border: 5px solid var(--border-color);
            border-top: 5px solid var(--accent);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .error-msg {
            color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e74c3c;
        }

        .basmala-header {
            font-size: 32px;
            margin: 20px 0 10px 0;
            text-align: center;
            color: var(--primary);
            font-family: 'Segoe UI', Tahoma, sans-serif;
            width: 100%;
            direction: rtl;
        }

        .basmala-turkish {
            font-size: 18px;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
            font-style: italic;
        }

        /* 19 Miracle Analysis Panel */
        #analysisContainer {
            width: 100%;
            max-width: 900px;
            margin-bottom: 30px;
        }

        .analysis-panel {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            border-left: 5px solid var(--panel-border);
            /* Gold for miracle highlights */
            box-shadow: var(--shadow);
            display: none;
            color: var(--text-main);
        }

        .analysis-title {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Modern Dashboard Style */
        .miracle-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .category-card {
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            height: 100%;
            /* E≈üit y√ºkseklik */
        }

        .category-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-color: var(--accent);
        }

        .category-header {
            background: linear-gradient(to right, rgba(39, 174, 96, 0.1), transparent);
            padding: 15px 20px;
            font-weight: 700;
            color: var(--accent);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .category-header i {
            font-size: 16px;
            opacity: 0.8;
        }

        .insight-list {
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .insight-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 20px;
            border-bottom: 1px solid var(--border-color);
            transition: background 0.2s;
            font-size: 14px;
            flex-wrap: wrap;
            /* ƒ∞yile≈ütirme: ƒ∞√ßerik ta≈üarsa veya not varsa alt satƒ±ra ge√ßsin */
        }

        .insight-note {
            width: 100%;
            font-size: 11px;
            color: #7f8c8d;
            margin-top: 4px;
            text-align: right;
            font-style: italic;
        }

        .insight-item:last-child {
            border-bottom: none;
        }

        .insight-item:hover {
            background: rgba(0, 0, 0, 0.02);
        }

        body.night-mode .insight-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .insight-label {
            font-weight: 500;
            color: var(--text-main);
            flex: 1;
            padding-right: 10px;
        }

        .insight-value-container {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-direction: row-reverse;
            /* Listeleme d√ºz olsun diye saƒüdan ba≈ülasƒ±n */
        }

        .insight-count-badge {
            background: var(--accent);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 13px;
            box-shadow: 0 2px 5px rgba(39, 174, 96, 0.3);
            cursor: pointer;
            transition: all 0.2s;
            min-width: 30px;
            text-align: center;
            display: inline-block;
        }

        .insight-count-badge:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(39, 174, 96, 0.5);
        }

        .insight-match-info {
            font-size: 11px;
            color: var(--text-secondary);
            text-align: right;
            background: rgba(0, 0, 0, 0.05);
            padding: 2px 6px;
            border-radius: 4px;
        }

        body.night-mode .insight-match-info {
            background: rgba(255, 255, 255, 0.1);
        }

        .miracle-badge {
            background: var(--panel-border);
            color: #000;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        body.night-mode .miracle-badge {
            color: #fff;
        }

        /* Tooltip Styles */
        .arabic-word {
            position: relative;
            display: inline-block;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 6px;
            transition: all 0.2s;
            margin: 0 2px;
        }

        .arabic-word:hover {
            background-color: rgba(39, 174, 96, 0.1);
        }

        /* Kategori Ba≈ülƒ±klarƒ± */
        /* The .category-header above replaces the old one */

        .category-block {
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        body.night-mode .category-block {
            background: rgba(30, 30, 30, 0.5);
        }

        /* Mukatta Letter Highlighting */
        .mukatta-highlight {
            background-color: rgba(231, 76, 60, 0.4);
            /* Kƒ±rmƒ±zƒ± arka plan - daha belirgin */
            border: 3px solid #e74c3c;
            /* Kalƒ±n kƒ±rmƒ±zƒ± border */
            font-weight: 700;
            /* Daha kalƒ±n yazƒ± */
            padding: 3px 5px;
            /* Daha fazla padding */
            border-radius: 5px;
            box-shadow: 0 0 8px rgba(231, 76, 60, 0.5);
            /* Hafif glow efekti */
            position: relative;
            display: inline-block;
        }

        /* Mukatta harf sƒ±ra numarasƒ± */
        .mukatta-highlight::after {
            content: attr(data-mukatta-index);
            position: absolute;
            top: -12px;
            right: -8px;
            font-size: 10px;
            background: #e67e22;
            color: white;
            padding: 1px 5px;
            border-radius: 10px;
            line-height: 14px;
            min-width: 14px;
            text-align: center;
            font-family: 'Segoe UI', sans-serif;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        body.night-mode .mukatta-highlight {
            background-color: rgba(231, 76, 60, 0.5);
            border-color: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.6);
        }

        body.night-mode .mukatta-highlight::after {
            background: #f39c12;
        }

        /* Kelime Sayacƒ± Sayƒ±larƒ± */
        .word-index {
            display: none;
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            background: var(--accent);
            color: white;
            padding: 0 5px;
            border-radius: 10px;
            line-height: 14px;
            min-width: 14px;
            text-align: center;
            font-family: 'Segoe UI', sans-serif;
            pointer-events: none;
            opacity: 0.8;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        body.show-word-counts .word-index {
            display: block;
        }

        body.night-mode .word-index {
            background: #27ae60;
            color: #fff;
        }

        /* Verse Preview Modal Styles */
        .verse-preview-modal {
            display: none;
            position: fixed;
            z-index: 10001;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            background: var(--card-bg);
            border: 3px solid var(--accent);
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
            padding: 25px;
            overflow-y: auto;
            color: var(--text-main);
        }

        .verse-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 12px;
        }

        .verse-preview-title {
            font-weight: bold;
            color: var(--accent);
            font-size: 18px;
        }

        .verse-preview-arabic {
            font-size: 32px;
            text-align: right;
            direction: rtl;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(39, 174, 96, 0.05);
            border-radius: 10px;
            line-height: 1.8;
            font-family: 'Traditional Arabic', serif;
            color: var(--arabic-color);
        }

        .verse-preview-turkish {
            font-size: 16px;
            line-height: 1.7;
            padding: 15px;
            background: rgba(39, 174, 96, 0.05);
            border-radius: 10px;
            color: var(--text-main);
            margin-bottom: 25px;
        }

        .verse-preview-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            border-top: 1px solid var(--border-color);
            padding-top: 20px;
        }

        .verse-preview-actions button {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .verse-preview-actions .primary-btn {
            background: var(--accent);
            color: white;
            border: none;
        }

        .verse-preview-actions .secondary-btn {
            background: transparent;
            color: var(--accent);
            border: 2px solid var(--accent);
        }

        .verse-preview-actions button:hover {
            opacity: 0.8;
            transform: translateY(-2px);
        }

        .highlighted-word {
            font-weight: bold;
            color: var(--accent);
            background: rgba(39, 174, 96, 0.2);
            padding: 0 4px;
            border-radius: 4px;
            border: 1px solid var(--accent);
            box-shadow: 0 0 5px rgba(39, 174, 96, 0.3);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: var(--card-bg);
            margin: 10% auto;
            padding: 25px;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            color: var(--text-main);
            position: relative;
        }

        .close-btn {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .ebced-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .ebced-table td {
            border: 1px solid var(--border-color);
            padding: 8px;
            text-align: center;
        }

        .ebced-letter {
            font-size: 20px;
            color: var(--accent);
            font-weight: bold;
        }

        .ebced-value {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .word-tooltip {
            visibility: hidden;
            width: 140px;
            background-color: #2c3e50;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 100;
            bottom: 125%;
            left: 50%;
            margin-left: -70px;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            font-family: 'Segoe UI', sans-serif;
            pointer-events: none;
            direction: ltr;
        }

        .word-tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #2c3e50 transparent transparent transparent;
        }

        .arabic-word:hover .word-tooltip {
            visibility: visible;
            opacity: 1;
        }

        .tooltip-transcription {
            font-size: 13px;
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 4px;
        }

        .tooltip-turkish {
            font-size: 12px;
            color: #ecf0f1;
        }

        .search-container {
            display: flex;
            gap: 10px;
            width: 100%;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px;
            font-size: 16px;
            border: 2px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-main);
            border-radius: 8px;
            outline: none;
            transition: all 0.3s;
            box-sizing: border-box;
        }

        .search-input:focus {
            border-color: var(--accent);
        }

        .suggestions-list {
            position: absolute;
            top: calc(100% + 5px);
            left: 0;
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: none;
        }

        .suggestions-list.active {
            display: block;
        }

        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid var(--border-color);
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background: rgba(39, 174, 96, 0.1);
            color: var(--accent);
        }

        .verse-select-container {
            flex: 0 0 120px;
            display: none;
        }

        .verse-select-container.active {
            display: block;
        }

        #verseSelect {
            width: 100%;
        }
    </style>
</head>

<body>
    <div class="header">
        <button id="themeToggle" class="theme-toggle" onclick="toggleTheme()">
            <span id="themeIcon">üåô</span>
            <span id="themeText">Gece Modu</span>
        </button>
        <button id="miracleToggle" onclick="toggleMiraclePanel()"
            style="background: var(--card-bg); border: 2px solid var(--accent); color: var(--accent); padding: 8px 15px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-weight: bold; transition: all 0.3s; margin-left: 10px;">
            <span>‚ú®</span>
            <span>Mucizeler</span>
        </button>
        <button id="akilNamazToggle" onclick="toggleAkilNamazPanel()"
            style="background: var(--card-bg); border: 2px solid #9b59b6; color: #9b59b6; padding: 8px 15px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-weight: bold; transition: all 0.3s; margin-left: 10px;">
            <span>üß†</span>
            <span>Akƒ±l ve Namaz</span>
        </button>
        <h1>Kuran-ƒ± Kerim Okuyucu</h1>
    </div>

    <div class="controls">
        <div style="display: flex; flex-direction: column; width: 100%; gap: 15px;">
            <div class="search-container">
                <input type="text" id="surahSearch" placeholder="üîç Sure Ara veya Se√ß..."
                    onclick="this.select(); toggleSuggestions(true)" oninput="filterSuggestions(this.value)"
                    class="search-input" autocomplete="off">
                <div id="surahSuggestions" class="suggestions-list">
                    <!-- JS ile dolacak -->
                </div>
                <div id="verseSelectContainer" class="verse-select-container">
                    <select id="verseSelect" onchange="scrollToVerse()">
                        <option value="" disabled selected>Ayet...</option>
                    </select>
                </div>
            </div>

            <div style="display: flex; justify-content: center; gap: 20px;">
                <label
                    style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 14px; color: var(--text-secondary);">
                    <input type="checkbox" id="countToggle" onchange="toggleWordCounts()"
                        style="cursor: pointer; width: 18px; height: 18px; accent-color: var(--accent);">
                    üî¢ Kelime Sayƒ±larƒ±nƒ± G√∂ster
                </label>
            </div>
        </div>
    </div>

    <div id="analysisContainer">
        <div id="miraclePanel" class="analysis-panel">
            <div class="analysis-title">‚ú® Kuran Mucizesi Analiz Paneli</div>

            <div id="ebcedInfo"
                style="font-size: 11px; margin-bottom: 15px; font-style: italic; color: var(--text-secondary); line-height: 1.4; border-bottom: 1px dashed var(--border-color); padding-bottom: 8px; display: flex; flex-direction: column; gap: 5px;">
                <div style="margin-bottom: 5px;">
                    <strong style="color: var(--accent);">Ebced Hesaplama Y√∂ntemi</strong><br>
                    Hesaplamalar ≈üu kurallara g√∂re yapƒ±lmƒ±≈ütƒ±r:
                    <ul style="margin: 5px 0; padding-left: 20px; list-style-type: disc;">
                        <li><strong>Harekeler Hari√ß:</strong> √úst√ºn, esre, √∂tre, cezm ve ≈üedde gibi i≈üaretler
                            hesaplamaya dahil edilmez.</li>
                        <li><strong>Sadece Harfler:</strong> Sadece Elif'ten Ya'ya kadar olan temel harf karakterleri
                            toplanƒ±r.</li>
                        <li><strong>Resm-i Osm√¢ni:</strong> Kur'an'ƒ±n orijinal Mushaf yazƒ±lƒ±≈üƒ± (harf dizilimi) esas
                            alƒ±nƒ±r.</li>
                    </ul>
                    <div
                        style="background: rgba(39, 174, 96, 0.1); padding: 5px; border-radius: 4px; margin-top: 5px; border-left: 3px solid var(--accent);">
                        <strong>NOT:</strong> Bu y√∂ntemle Besmele'nin deƒüeri tam <strong>786</strong> √ßƒ±kmaktadƒ±r. Bu,
                        harflerin orijinal yerle≈üimi ve ebced deƒüerlerinin standart kar≈üƒ±lƒ±ƒüƒ±dƒ±r.
                    </div>
                </div>
                <button onclick="toggleEbcedModal()"
                    style="background: var(--accent); border: 2px solid var(--accent); color: white; padding: 6px 12px; border-radius: 10px; cursor: pointer; font-size: 11px; font-weight: bold; width: fit-content; align-self: flex-end; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.1);"
                    onmouseover="this.style.background='transparent'; this.style.color='var(--accent)';"
                    onmouseout="this.style.background='var(--accent)'; this.style.color='white';">
                    üìä Ebced Tablosu
                </button>
            </div>

            <!-- Mukatta Table Section -->
            <div id="mukattaContainer"
                style="margin-bottom: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 15px;">
                <button onclick="toggleMukattaTable()"
                    style="background: transparent; border: 1px solid var(--accent); color: var(--accent); padding: 8px 12px; border-radius: 8px; cursor: pointer; width: 100%; text-align: left; display: flex; justify-content: space-between; align-items: center; font-weight: bold; transition: all 0.2s;">
                    <span>üìú Harflerle Ba≈ülayan Sureler</span>
                    <span id="mukattaToggleIcon">‚ñº</span>
                </button>
                <div id="mukattaTableArea" style="display: none; margin-top: 10px; overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                        <thead>
                            <tr style="background: rgba(39, 174, 96, 0.1); color: var(--primary);">
                                <th style="padding: 8px; text-align: left; border: 1px solid var(--border-color);">Sure
                                </th>
                                <th style="padding: 8px; text-align: center; border: 1px solid var(--border-color);">No
                                </th>
                                <th style="padding: 8px; text-align: left; border: 1px solid var(--border-color);">
                                    Ba≈ülangƒ±√ß</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid var(--border-color);">1.
                                    Ayet</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid var(--border-color);">
                                    Besmele</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid var(--border-color);">
                                    Sure Toplamƒ±</th>
                                <th style="padding: 8px; text-align: left; border: 1px solid var(--border-color);">
                                    Genel Toplam (Besmele + Sure)</th>
                            </tr>
                        </thead>
                        <tbody id="mukattaTableBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <ul id="insightList" class="insight-list">
                <!-- Veriler JS ile dolacak -->
            </ul>
            <div id="tooltipStatus"
                style="font-size: 11px; margin-top: 10px; border-top: 1px solid var(--border-color); padding-top: 8px; color: #7f8c8d; font-family: sans-serif;">
                üîç Kelime Mealleri: Bekleniyor...
            </div>

            <!-- 19 Mucizesi Bulgularƒ± (Merged) -->
            <!-- MODERN MUCƒ∞ZELER PANELƒ∞ -->
            <div class="miracle-panel">

                <!-- KART 1: TEMEL 19 DENGESƒ∞ -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-balance-scale"></i> üîπ Temel 19 Dengesi
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">Besmele Harf Sayƒ±sƒ±</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge">19</span>
                                <span class="insight-match-info">Doƒürulandƒ± ‚úÖ</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">Sure Sayƒ±sƒ±</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge">114</span>
                                <span class="insight-match-info">19 x 6</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">Besmele Sayƒ±sƒ±</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge">114</span>
                                <span class="insight-match-info">19 x 6 ‚úÖ</span>
                            </div>
                        </li>
                    </ul>
                    <div
                        style="font-size: 11px; padding: 10px 20px; color: var(--text-secondary); background: rgba(0,0,0,0.02); border-top: 1px solid var(--border-color);">
                        Kur'an'da 114 besmele vardƒ±r (Tevbe hari√ß 113 + Neml 30. ayet).
                    </div>
                </div>

                <!-- KART 2: ƒ∞LAHƒ∞ ƒ∞Sƒ∞MLER -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-star"></i> ‚ú® ƒ∞lahi ƒ∞simler
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"Allah" (Lafza-i Celal)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showAllahTooltip(event)">2698 üîç</span>
                                <span class="insight-match-info" style="color: var(--accent); font-weight: bold;">19 x
                                    142 ‚úÖ</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Rahman" (ÿ±ÿ≠ŸÖŸ∞ŸÜ) Lafzƒ±</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showRahmanTooltip(event)">178 üîç</span>
                                <span class="insight-match-info">114+64=178 ‚úÖ</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Rahim" Lafzƒ±</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showRahimTooltip(event)">229 üîç</span>
                                <span class="insight-match-info">115+114=229 ‚úÖ</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- KART 3: ZITLARIN DENGESƒ∞ -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-adjust"></i> ‚öñÔ∏è Zƒ±tlarƒ±n Dengesi
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"Melek" (ŸÖŸÑÿ¶ŸÉÿ©)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showAngelTooltip(event)">88 üîç</span>
                                <span style="margin: 0 8px; color: var(--text-secondary);">=</span>
                                <span style="margin-right: 8px; font-weight: 500;">"≈ûeytan"</span>
                                <span class="insight-count-badge" style="background: #e74c3c;"
                                    onclick="showSatanTooltip(event)">88 üîç</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Cennet" (ÿ¨ŸÜÿ©)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showJannahTooltip(event)">77 üîç</span>
                                <span style="margin: 0 8px; color: var(--text-secondary);">=</span>
                                <span style="margin-right: 8px; font-weight: 500;">"Cehennem"</span>
                                <span class="insight-count-badge" style="background: #e74c3c;"
                                    onclick="showJahannamTooltip(event)">77 üîç</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"G√ºne≈ü" (≈ûems)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showShamsTooltip(event)">33 üîç</span>
                                <span style="margin: 0 8px; color: var(--text-secondary);">=</span>
                                <span style="margin-right: 8px; font-weight: 500;">"G√∂lge"</span>
                                <span class="insight-count-badge" style="background: #e74c3c;"
                                    onclick="showZilTooltip(event)">33 üîç</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- KART 4: PEYGAMBERLER -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-scroll"></i> üìú Peygamberler
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"Adem" (ÿ¢ÿØŸÖ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showAdemTooltip(event)">25 üîç</span>
                                <span style="margin: 0 8px; color: var(--text-secondary);">=</span>
                                <span style="margin-right: 8px; font-weight: 500;">"ƒ∞sa"</span>
                                <span class="insight-count-badge" style="background: #e74c3c;"
                                    onclick="showIsaTooltip(event)">25 üîç</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Musa" (ŸÖŸàÿ≥Ÿâ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showMusaTooltip(event)">136 üîç</span>
                                <span class="insight-match-info">-</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"ƒ∞sa" (ÿπŸäÿ≥Ÿâ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showIsaTooltip(event)">25 üîç</span>
                                <span class="insight-match-info">Tekil G√∂sterim</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- KART 5: ZAMAN VE KOZMOS -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-globe"></i> üåç Zaman ve Kozmos
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"Arƒ±" (Nahl)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showNahlTooltip(event)">1 üîç</span>
                                <span class="insight-match-info" style="font-weight:bold; color:#d35400;">16. Sure & 16
                                    Kromozom ‚úÖ</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Ay" (Kamer)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showQamarTooltip(event)">27 üîç</span>
                                <span class="insight-match-info">Y√∂r√ºnge: 27 g√ºn</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Ay" (≈ûehr)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showShehrTooltip(event)">27 üîç</span>
                                <span class="insight-match-info">12 Ay (Yƒ±l)</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"G√ºn" (Yevm)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" onclick="showYevmTooltip(event)">31 üîç</span>
                                <span class="insight-match-info">365 G√ºn (Yƒ±l)</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- KART 6: AHƒ∞RET G√úNLERƒ∞ -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-hourglass-half"></i> ‚è≥ Ahiret G√ºnleri
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"Kƒ±yamet G√ºn√º"</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge"
                                    onclick="showGenericWordTooltip(event, 'qiyamaTooltip', 'Kƒ±yamet G√ºn√º', typeof qiyamaGunuData !== 'undefined' ? qiyamaGunuData : [], 'ÿßŸÑŸÇŸäÿßŸÖÿ©')">72
                                    üîç</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Mah≈üer G√ºn√º"</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge"
                                    onclick="showGenericWordTooltip(event, 'hashrTooltip', 'Mah≈üer G√ºn√º', typeof hashrGunuData !== 'undefined' ? hashrGunuData : [], 'ÿßŸÑÿ≠ÿ¥ÿ±')">42
                                    üîç</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Hesap G√ºn√º"</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge"
                                    onclick="showGenericWordTooltip(event, 'hisabTooltip', 'Hesap G√ºn√º', typeof hisabGunuData !== 'undefined' ? hisabGunuData : [], 'ÿßŸÑÿ≠ÿ≥ÿßÿ®')">37
                                    üîç</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Din G√ºn√º"</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge"
                                    onclick="showGenericWordTooltip(event, 'dinTooltip', 'Din G√ºn√º', typeof dinGunuData !== 'undefined' ? dinGunuData : [], 'ÿßŸÑÿØŸäŸÜ')">34
                                    üîç</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Ayrƒ±m G√ºn√º"</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge"
                                    onclick="showGenericWordTooltip(event, 'faslTooltip', 'Ayrƒ±m G√ºn√º', typeof faslGunuData !== 'undefined' ? faslGunuData : [], 'ÿßŸÑŸÅÿµŸÑ')">11
                                    üîç</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- KART 7: ƒ∞NAN√á GRUPLARI -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-users"></i> üë• ƒ∞nan√ß Gruplarƒ±
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"M√ºmin" (ŸÖÿ§ŸÖŸÜ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #27ae60;"
                                    onclick="showGenericWordTooltip(event, 'muminTooltip', 'M√ºmin', typeof faithGroupsData !== 'undefined' ? faithGroupsData.Mumin.locations : [], 'ŸÖÿ§ŸÖŸÜ')">
                                    <script>document.write(typeof faithGroupsData !== 'undefined' ? faithGroupsData.Mumin.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"M√ºsl√ºman" (ŸÖÿ≥ŸÑŸÖ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #2ecc71;"
                                    onclick="showGenericWordTooltip(event, 'muslimTooltip', 'M√ºsl√ºman', typeof faithGroupsData !== 'undefined' ? faithGroupsData.Muslim.locations : [], 'ŸÖÿ≥ŸÑŸÖ')">
                                    <script>document.write(typeof faithGroupsData !== 'undefined' ? faithGroupsData.Muslim.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"M√º≈ürik" (ŸÖÿ¥ÿ±ŸÉ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #e67e22;"
                                    onclick="showGenericWordTooltip(event, 'mushrikTooltip', 'M√º≈ürik', typeof faithGroupsData !== 'undefined' ? faithGroupsData.Mushrik.locations : [], 'ŸÖÿ¥ÿ±ŸÉ')">
                                    <script>document.write(typeof faithGroupsData !== 'undefined' ? faithGroupsData.Mushrik.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"M√ºnafƒ±k" (ŸÖŸÜÿßŸÅŸÇ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #e74c3c;"
                                    onclick="showGenericWordTooltip(event, 'munafikTooltip', 'M√ºnafƒ±k', typeof faithGroupsData !== 'undefined' ? faithGroupsData.Munafik.locations : [], 'ŸÖŸÜÿßŸÅŸÇ')">
                                    <script>document.write(typeof faithGroupsData !== 'undefined' ? faithGroupsData.Munafik.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Yahudi" (ŸäŸáŸàÿØ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #f1c40f; color:#000;"
                                    onclick="showGenericWordTooltip(event, 'yahudTooltip', 'Yahudi', typeof faithGroupsData !== 'undefined' ? faithGroupsData.Yahud.locations : [], 'ŸäŸáŸàÿØ')">
                                    <script>document.write(typeof faithGroupsData !== 'undefined' ? faithGroupsData.Yahud.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Hƒ±ristiyan" (ŸÜÿµÿßÿ±Ÿâ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #9b59b6;"
                                    onclick="showGenericWordTooltip(event, 'nasaraTooltip', 'Hƒ±ristiyan', typeof faithGroupsData !== 'undefined' ? faithGroupsData.Nasara.locations : [], 'ŸÜÿµÿßÿ±Ÿâ')">
                                    <script>document.write(typeof faithGroupsData !== 'undefined' ? faithGroupsData.Nasara.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- KART 9: HAYVANLAR -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-paw"></i> ü¶Å Hayvanlar
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"E≈üek" (Himar/Hamir)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #7f8c8d;"
                                    onclick="showGenericWordTooltip(event, 'esekTooltip', 'E≈üek (Himar/Hamir/Humur)', typeof animalsData !== 'undefined' ? animalsData.Esek.locations : [], 'ÿ≠ŸÖÿßÿ±')">
                                    <script>document.write(typeof animalsData !== 'undefined' ? animalsData.Esek.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                            <div class="insight-note">*M√ºddessir 50 (Yaban E≈üekleri) dahil</div>
                        </li>
                    </ul>
                </div>

                <!-- KART 10: DEMƒ∞R/MADENLER -->
                <div class="category-card">
                    <div class="category-header" style="justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-gem"></i> ‚öôÔ∏è Demir / Madenler
                        </div>
                        <i class="fas fa-info-circle" onclick="toggleIronModal()"
                            style="cursor: pointer; color: var(--accent); font-size: 18px;" title="Detaylƒ± Bilgi"></i>
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"Hadid" (ÿ≠ÿØŸäÿØ) Ebced</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #7f8c8d;"
                                    onclick="showGenericWordTooltip(event, 'hadidTooltip', 'Demir (Hadid)', typeof mineralsData !== 'undefined' ? mineralsData.Demir.locations : [], 'ÿ≠ÿØŸäÿØ')">
                                    26 üîç
                                </span>
                                <span class="insight-match-info" style="color: var(--accent); font-weight: bold;">Atom
                                    No: 26 ‚úÖ</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"el-Hadid" (ÿßŸÑÿ≠ÿØŸäÿØ) Ebced</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #34495e;">57</span>
                                <span class="insight-match-info" style="color: var(--accent); font-weight: bold;">57.
                                    Sure ‚úÖ</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">Demir-57 ƒ∞zotopu</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #2c3e50;">57</span>
                                <span class="insight-match-info">K√ºtle No = Sure No</span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">Kur'an'ƒ±n Merkezi</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #1abc9c;">114/2</span>
                                <span class="insight-match-info">= 57 (Hadid Suresi)</span>
                            </div>
                        </li>
                    </ul>
                    <div
                        style="font-size: 11px; padding: 10px 20px; color: var(--text-secondary); background: rgba(0,0,0,0.02); border-top: 1px solid var(--border-color);">
                        Demir, D√ºnya'da olu≈üamaz. S√ºpernova patlamalarƒ±yla uzaydan "indirilmi≈ütir" (57:25).
                    </div>
                </div>

                <!-- KART 11: HARAM / HELAL -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-balance-scale"></i> ‚öñÔ∏è Haram ve Helal
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"Haram" (Yasak)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #c0392b;"
                                    onclick="showGenericWordTooltip(event, 'haramTooltip', 'Haram (Yasak)', typeof haramHelalData !== 'undefined' ? haramHelalData.Haram.locations : [], 'ÿ≠ÿ±ÿßŸÖ')">
                                    <script>document.write(typeof haramHelalData !== 'undefined' ? haramHelalData.Haram.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                            <div class="insight-note">Fiil t√ºrevleri dahil (Harrama vb.)</div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Helal" (Serbest)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #27ae60;"
                                    onclick="showGenericWordTooltip(event, 'helalTooltip', 'Helal (Serbest)', typeof haramHelalData !== 'undefined' ? haramHelalData.Helal.locations : [], 'ÿ≠ŸÑÿßŸÑ')">
                                    <script>document.write(typeof haramHelalData !== 'undefined' ? haramHelalData.Helal.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                            <div class="insight-note">Fiil t√ºrevleri dahil (Ehalle vb.)</div>
                        </li>
                    </ul>
                    <div
                        style="font-size: 11px; padding: 10px 20px; color: var(--text-secondary); background: rgba(0,0,0,0.02); border-top: 1px solid var(--border-color);">
                        Kutsal/Saygƒ±n anlamƒ±ndaki kullanƒ±mlar hari√ß, doƒürudan yasak ve serbest anlamƒ±ndaki sayƒ±lardƒ±r.
                    </div>
                </div>

                <!-- KART 8: ƒ∞NSAN VE Cƒ∞NSƒ∞YET -->
                <div class="category-card">
                    <div class="category-header">
                        <i class="fas fa-restroom"></i> üë´ ƒ∞nsan ve Cinsiyet
                    </div>
                    <ul class="insight-list">
                        <li class="insight-item">
                            <span class="insight-label">"Adam" (ÿ±ÿ¨ŸÑ)</span>
                            <div class="insight-value-container" style="flex-direction: row !important;">
                                <span class="insight-count-badge" style="background: #3498db;"
                                    onclick="showGenericWordTooltip(event, 'raculTooltip', 'Adam (Rac√ºl)', typeof genderData !== 'undefined' ? genderData.Racul.locations : [], 'ÿ±ÿ¨ŸÑ')">
                                    23 üîç
                                </span>
                                <span style="margin: 0 8px; color: var(--text-secondary);">=</span>
                                <span style="margin-right: 8px; font-weight: 500;">"Kadƒ±n"</span>
                                <span class="insight-count-badge" style="background: #e91e63;"
                                    onclick="showGenericWordTooltip(event, 'imraahTooltip', 'Kadƒ±n (ƒ∞mra\'ah - Ebu Leheb\'in karƒ±sƒ± hari√ß)', typeof genderData !== 'undefined' ? genderData.Imraah.locations : [], 'ÿßŸÖÿ±ÿ£ÿ©')">
                                    23 üîç
                                </span>
                            </div>
                            <div class="insight-note">*Ebu Leheb'in karƒ±sƒ± (111:4) hari√ß</div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Kadƒ±nlar" (ÿßŸÑŸÜÿ≥ÿßÿ°)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #c2185b;"
                                    onclick="showGenericWordTooltip(event, 'nisaTooltip', 'Kadƒ±nlar (Nisa)', typeof genderData !== 'undefined' ? genderData.Nisa.locations : [], 'ÿßŸÑŸÜÿ≥ÿßÿ°')">
                                    <script>document.write(typeof genderData !== 'undefined' ? genderData.Nisa.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Erkek" (ÿ∞ŸÉÿ±)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #3498db;"
                                    onclick="showGenericWordTooltip(event, 'zekerTooltip', 'Erkek (Zeker)', typeof genderData !== 'undefined' ? genderData.Zeker.locations : [], 'ÿ∞ŸÉÿ±')">
                                    <script>document.write(typeof genderData !== 'undefined' ? genderData.Zeker.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"Di≈üi" (ÿ£ŸÜÿ´Ÿâ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #e91e63;"
                                    onclick="showGenericWordTooltip(event, 'unsaTooltip', 'Di≈üi (√ún≈üa)', typeof genderData !== 'undefined' ? genderData.Unsa.locations : [], 'ÿ£ŸÜÿ´Ÿâ')">
                                    <script>document.write(typeof genderData !== 'undefined' ? genderData.Unsa.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"ƒ∞nsan" (ÿ•ŸÜÿ≥ÿßŸÜ)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #95a5a6;"
                                    onclick="showGenericWordTooltip(event, 'insanTooltip', 'ƒ∞nsan', typeof genderData !== 'undefined' ? genderData.Insan.locations : [], 'ÿ•ŸÜÿ≥ÿßŸÜ')">
                                    <script>document.write(typeof genderData !== 'undefined' ? genderData.Insan.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                        <li class="insight-item">
                            <span class="insight-label">"ƒ∞nsanlar" (ÿßŸÑŸÜÿßÿ≥)</span>
                            <div class="insight-value-container">
                                <span class="insight-count-badge" style="background: #7f8c8d;"
                                    onclick="showGenericWordTooltip(event, 'nasTooltip', 'ƒ∞nsanlar (Nas)', typeof genderData !== 'undefined' ? genderData.Nas.locations : [], 'ŸÜÿßÿ≥')">
                                    <script>document.write(typeof genderData !== 'undefined' ? genderData.Nas.count : '...')</script>
                                    üîç
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div
                style="font-size: 11px; margin-top: 10px; padding-top: 8px; border-top: 1px dashed var(--border-color); color: var(--text-secondary); line-height: 1.5;">
                <strong>Besmele Detayƒ±:</strong> Kur'an'da toplam <strong>114 Besmele</strong> vardƒ±r:
                <br>‚Ä¢ 113 surenin ba≈üƒ±nda (Tevbe suresi hari√ß)
                <br>‚Ä¢ 1 adet Neml suresi 27:30'da
                <br>‚Ä¢ 114 = 19 √ó 6 ‚úÖ
            </div>
        </div>
    </div>

    <!-- Ebced Modal -->
    <div id="ebcedModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="toggleEbcedModal()">&times;</span>
            <h3 style="margin-top: 0; color: var(--primary);">Ebced Deƒüerleri Tablosu</h3>
            <p style="font-size: 14px; color: var(--text-secondary);">Standart Ebced (Cemel) sistemindeki harf
                kar≈üƒ±lƒ±klarƒ±:</p>

            <table class="ebced-table">
                <tr>
                    <td><span class="ebced-letter">ÿß</span><br><span class="ebced-value">1</span></td>
                    <td><span class="ebced-letter">ÿ®</span><br><span class="ebced-value">2</span></td>
                    <td><span class="ebced-letter">ÿ¨</span><br><span class="ebced-value">3</span></td>
                    <td><span class="ebced-letter">ÿØ</span><br><span class="ebced-value">4</span></td>
                    <td><span class="ebced-letter">Ÿá</span><br><span class="ebced-value">5</span></td>
                    <td><span class="ebced-letter">Ÿà</span><br><span class="ebced-value">6</span></td>
                    <td><span class="ebced-letter">ÿ≤</span><br><span class="ebced-value">7</span></td>
                </tr>
                <tr>
                    <td><span class="ebced-letter">ÿ≠</span><br><span class="ebced-value">8</span></td>
                    <td><span class="ebced-letter">ÿ∑</span><br><span class="ebced-value">9</span></td>
                    <td><span class="ebced-letter">Ÿä</span><br><span class="ebced-value">10</span></td>
                    <td><span class="ebced-letter">ŸÉ</span><br><span class="ebced-value">20</span></td>
                    <td><span class="ebced-letter">ŸÑ</span><br><span class="ebced-value">30</span></td>
                    <td><span class="ebced-letter">ŸÖ</span><br><span class="ebced-value">40</span></td>
                    <td><span class="ebced-letter">ŸÜ</span><br><span class="ebced-value">50</span></td>
                </tr>
                <tr>
                    <td><span class="ebced-letter">ÿ≥</span><br><span class="ebced-value">60</span></td>
                    <td><span class="ebced-letter">ÿπ</span><br><span class="ebced-value">70</span></td>
                    <td><span class="ebced-letter">ŸÅ</span><br><span class="ebced-value">80</span></td>
                    <td><span class="ebced-letter">ÿµ</span><br><span class="ebced-value">90</span></td>
                    <td><span class="ebced-letter">ŸÇ</span><br><span class="ebced-value">100</span></td>
                    <td><span class="ebced-letter">ÿ±</span><br><span class="ebced-value">200</span></td>
                    <td><span class="ebced-letter">ÿ¥</span><br><span class="ebced-value">300</span></td>
                </tr>
                <tr>
                    <td><span class="ebced-letter">ÿ™</span><br><span class="ebced-value">400</span></td>
                    <td><span class="ebced-letter">ÿ´</span><br><span class="ebced-value">500</span></td>
                    <td><span class="ebced-letter">ÿÆ</span><br><span class="ebced-value">600</span></td>
                    <td><span class="ebced-letter">ÿ∞</span><br><span class="ebced-value">700</span></td>
                    <td><span class="ebced-letter">ÿ∂</span><br><span class="ebced-value">800</span></td>
                    <td><span class="ebced-letter">ÿ∏</span><br><span class="ebced-value">900</span></td>
                    <td><span class="ebced-letter">ÿ∫</span><br><span class="ebced-value">1000</span></td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Ebced Detay Modal -->
    <div id="ebcedDetailModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="toggleEbcedDetailModal()">&times;</span>
            <h3 id="ebcedModalTitle" style="margin-top: 0; color: var(--primary);">Surenin Ebced D√∂k√ºm√º</h3>
            <div style="max-height: 400px; overflow-y: auto;">
                <table class="ebced-table">
                    <thead>
                        <tr>
                            <th>Ayet</th>
                            <th>Ebced Deƒüeri</th>
                        </tr>
                    </thead>
                    <tbody id="ebcedDetailBody">
                        <!-- JS ile doldurulacak -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="loadingSpinner"></div>
    <div id="contentArea"></div>

    <script src="zil_data.js"></script>
    <script src="word_tooltip.js"></script>
    <script>
        const surahNames = [
            "F√¢tiha", "Bakara", "√Çl-i ƒ∞mr√¢n", "Nis√¢", "M√¢ide", "En'√¢m", "A'r√¢f", "Enf√¢l", "Tevbe", "Y√ªnus", "H√ªd", "Y√ªsuf", "Ra'd", "ƒ∞br√¢h√Æm", "Hicr", "Nahl", "ƒ∞sr√¢", "Kehf", "Meryem", "T√¢h√¢", "Enbiy√¢", "Hac", "M√º'min√ªn", "N√ªr", "Furk√¢n", "≈ûuar√¢", "Neml", "Kasas", "Ankeb√ªt", "R√ªm", "Lokm√¢n", "Secde", "Ahz√¢b", "Sebe'", "F√¢tƒ±r", "Y√¢s√Æn", "S√¢ff√¢t", "S√¢d", "Z√ºmer", "M√º'min", "Fussilet", "≈û√ªr√¢", "Zuhruf", "Duh√¢n", "C√¢siye", "Ahkaf", "Muhammed", "Fetih", "Hucur√¢t", "K√¢f", "Z√¢riy√¢t", "T√ªr", "Necm", "Kamer", "Rahm√¢n", "V√¢kƒ±a", "Had√Æd", "M√ºc√¢dele", "Ha≈ür", "M√ºmtehine", "Saf", "Cuma", "M√ºn√¢fik√ªn", "Teg√¢b√ºn", "Tal√¢k", "Tahr√Æm", "M√ºlk", "Kalem", "H√¢kka", "Me√¢ric", "N√ªh", "Cin", "M√ºzzemmil", "M√ºddessir", "Kƒ±y√¢me", "ƒ∞ns√¢n", "M√ºrsel√¢t", "Nebe'", "N√¢zi√¢t", "Abese", "Tekv√Ær", "ƒ∞nfit√¢r", "Mutaffif√Æn", "ƒ∞n≈üik√¢k", "Bur√ªc", "T√¢rƒ±k", "A'l√¢", "G√¢≈üiye", "Fecr", "Beled", "≈ûems", "Leyl", "Duh√¢", "ƒ∞n≈üir√¢h", "T√Æn", "Alak", "Kadir", "Beyyine", "Zilz√¢l", "√Çdiy√¢t", "KƒÅria", "Tek√¢s√ºr", "Asr", "H√ºmeze", "F√Æl", "Kurey≈ü", "M√¢√ªn", "Kevser", "K√¢fir√ªn", "Nasr", "Tebbet", "ƒ∞hl√¢s", "Felak", "N√¢s"
        ];

        const surahVerseCount = {
            1: 7, 2: 286, 3: 200, 4: 176, 5: 120, 6: 165, 7: 206, 8: 75, 9: 129, 10: 109, 11: 123, 12: 111, 13: 43, 14: 52, 15: 99, 16: 128, 17: 111, 18: 110, 19: 98, 20: 135, 21: 112, 22: 78, 23: 118, 24: 64, 25: 77, 26: 227, 27: 93, 28: 88, 29: 69, 30: 60, 31: 34, 32: 30, 33: 73, 34: 54, 35: 45, 36: 83, 37: 182, 38: 88, 39: 75, 40: 85, 41: 54, 42: 53, 43: 89, 44: 59, 45: 37, 46: 35, 47: 38, 48: 29, 49: 18, 50: 45, 51: 60, 52: 49, 53: 62, 54: 55, 55: 78, 56: 96, 57: 29, 58: 22, 59: 24, 60: 13, 61: 14, 62: 11, 63: 11, 64: 18, 65: 12, 66: 12, 67: 30, 68: 52, 69: 52, 70: 44, 71: 28, 72: 28, 73: 20, 74: 56, 75: 40, 76: 31, 77: 50, 78: 40, 79: 46, 80: 42, 81: 29, 82: 19, 83: 36, 84: 25, 85: 22, 86: 17, 87: 19, 88: 26, 89: 30, 90: 20, 91: 15, 92: 21, 93: 11, 94: 8, 95: 8, 96: 19, 97: 5, 98: 8, 99: 8, 100: 11, 101: 11, 102: 8, 103: 3, 104: 9, 105: 5, 106: 4, 107: 7, 108: 3, 109: 6, 110: 3, 111: 5, 112: 4, 113: 5, 114: 6
        };

        const suggestionsDiv = document.getElementById('surahSuggestions');

        function populateSuggestions(filter = '') {
            suggestionsDiv.innerHTML = '';
            const query = filter.toLocaleLowerCase('tr-TR');

            surahNames.forEach((name, index) => {
                const surahNum = index + 1;
                const displayName = `${surahNum}. ${name}`;

                if (displayName.toLocaleLowerCase('tr-TR').includes(query)) {
                    const item = document.createElement('div');
                    item.className = 'suggestion-item';
                    item.textContent = displayName;
                    item.onclick = () => {
                        document.getElementById('surahSearch').value = displayName;
                        toggleSuggestions(false);
                        loadSurah(surahNum);
                    };
                    suggestionsDiv.appendChild(item);
                }
            });
        }

        function toggleSuggestions(show) {
            if (show) {
                populateSuggestions(''); // Show all surahs on click/focus
                suggestionsDiv.classList.add('active');
            } else {
                setTimeout(() => suggestionsDiv.classList.remove('active'), 200);
            }
        }

        function filterSuggestions(val) {
            populateSuggestions(val);
            suggestionsDiv.classList.add('active');
        }

        // Close when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                suggestionsDiv.classList.remove('active');
            }
        });

        // Initialize suggestions on load
        populateSuggestions();

        async function fetchAyah(surah, ayah, isHeader = false) {
            console.log(`fetchAyah called: ${surah}:${ayah}, isHeader: ${isHeader}`);

            if (isHeader) {
                return {
                    arabic: "ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸéŸáŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê",
                    turkish: "Rahman ve Rahim olan Allah'ƒ±n adƒ±yla.",
                    isHeader: true
                };
            }

            const sNum = parseInt(surah);
            const aNum = parseInt(ayah);

            // 1. Try API with Timeout
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 3000); // 3 saniye zaman a≈üƒ±mƒ±

            try {
                const url = `https://api.alquran.cloud/v1/ayah/${sNum}:${aNum}/editions/quran-uthmani,tr.diyanet`;
                const res = await fetch(url, { signal: controller.signal });
                clearTimeout(timeoutId);

                if (!res.ok) throw new Error("API yanƒ±t vermedi");
                const json = await res.json();

                if (!json.data || json.data.length < 2) throw new Error("Eksik API verisi");

                return {
                    arabic: json.data[0].text,
                    turkish: json.data[1].text
                };
            } catch (err) {
                console.warn("API hatasƒ±/zaman a≈üƒ±mƒ±, yerel veri deneniyor:", err);

                // 2. Fallback to Local Data
                try {
                    if (typeof GLOBAL_QURAN_ARABIC === 'undefined') throw new Error("GLOBAL_QURAN_ARABIC y√ºklenmedi");
                    if (typeof GLOBAL_QURAN_TR === 'undefined') throw new Error("GLOBAL_QURAN_TR y√ºklenmedi");

                    // Arabic Data Search (Loose equality for safety)
                    const arabicSurah = GLOBAL_QURAN_ARABIC.find(s => s.id == sNum);
                    const arabicVerse = arabicSurah?.verses.find(v => v.id == aNum);

                    // Turkish Data Search (Handle potential key types)
                    const trSurah = GLOBAL_QURAN_TR[sNum] || GLOBAL_QURAN_TR[sNum.toString()];
                    const trVerse = trSurah?.ayahs?.[aNum] || trSurah?.ayahs?.[aNum.toString()];

                    if (arabicVerse && trVerse) {
                        console.log('Yerel veri ba≈üarƒ±yla kullanƒ±ldƒ±.');
                        return {
                            arabic: arabicVerse.text,
                            turkish: trVerse
                        };
                    }

                    throw new Error(`Yerel veri bulunamadƒ±: Sure ${sNum}, Ayet ${aNum}`);
                } catch (localErr) {
                    console.error("Kritik Hata (Yerel Veri):", localErr);
                    return null;
                }
            }
        }

        function showMiracleInsights(surahNum) {
            const panel = document.getElementById('miraclePanel');
            const list = document.getElementById('insightList');
            list.innerHTML = '';

            const insights = [];

            // Genel Ger√ßekler
            insights.push({ key: "Kuran'daki Toplam Sure Sayƒ±sƒ±", val: "114 (19 x 6)" });

            // surah_stats.js'den verileri √ßek (Eƒüer mevcutsa)
            const globalStats = (typeof SURAH_STATS !== 'undefined') ? SURAH_STATS : (window.SURAH_STATS || null);
            const stats = (globalStats && globalStats[surahNum]) ? globalStats[surahNum] : null;

            if (stats) {
                insights.push({ key: "Ayet Sayƒ±sƒ±", val: stats.verses.length });
                insights.push({ key: "Kelime Sayƒ±sƒ±", val: stats.words.toLocaleString('tr-TR') });
                insights.push({ key: "Harf Sayƒ±sƒ± (Resm-i Osm√¢ni)", val: stats.chars_strict.toLocaleString('tr-TR') });
                insights.push({ key: "Harf Sayƒ±sƒ± (Asarlar dahil)", val: stats.chars_extended.toLocaleString('tr-TR') });

                // Fatiha (1) i√ßin Besmele Ebcedini √∂zel g√∂ster
                if (surahNum === 1) {
                    insights.push({ key: "Besmele-i ≈ûerife Ebcedi", val: "786" });
                }

                // Surenin Toplam Ebcedi Tƒ±klanabilir
                const totalEbcedStr = stats.ebced.toLocaleString('tr-TR');
                insights.push({
                    key: "Surenin Toplam Ebcedi",
                    val: `<span onclick="toggleEbcedDetailModal(${surahNum})" style="color: var(--accent); cursor: pointer; text-decoration: underline; font-weight: bold;">${totalEbcedStr}</span>`
                });

                // √ñnceki Fatiha √∂zel ebcedini (494) manuel ekleyelim (Bu isim ebcediydi)
                if (surahNum === 1) {
                    insights.push({ key: "'Fatiha' ƒ∞smi Ebcedi", val: "494", tag: "19 x 26" });
                }
            } else {
                // Yedek Mekanizma (Eƒüer JS y√ºklenmezse eski statik mantƒ±k)
                if (surahNum === 1) {
                    insights.push({ key: "Ayet Sayƒ±sƒ±", val: "7" });
                    insights.push({ key: "Kelime Sayƒ±sƒ±", val: "29" });
                    insights.push({ key: "Harf Sayƒ±sƒ±", val: "139" });
                    insights.push({ key: "Surenin Toplam Ebcedi", val: "10,143" });
                }
            }

            // Diƒüer √∂zel tespitler
            if (surahNum === 1) {
                // Fatiha i√ßin ek bir ≈üey yok
            } else if (surahNum === 2) {
                insights.push({ key: "Alif-Lam-Mim (ÿßŸÑŸÖ) Ebcedi", val: "71" });
            } else if (surahNum === 42 || surahNum === 50) {
                insights.push({ key: "Ba≈ülangƒ±√ß Harfi 'Kaf' Toplamƒ± (42+50)", val: "114 (19 x 6)" });
            }

            if (insights.length > 0) {
                insights.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'insight-item';
                    li.innerHTML = `<span>${item.key}</span> <span>${item.val} ${item.tag ? `<span class="miracle-badge">${item.tag}</span>` : ''}</span>`;
                    list.appendChild(li);
                });
                // 19 Mucizesi Bulgularƒ± paneli
                const nineteenPanel = document.getElementById('nineteenMiraclePanel');
                if (nineteenPanel) {
                    // Auto-show logic removed. Controlled by toggle button.
                    // nineteenPanel.style.display = 'block'; 
                }
            } else {
            }
        }

        // Toggle Miracle Panel manually
        function toggleMiraclePanel() {
            const panel = document.getElementById('miraclePanel');
            const analysisContainer = document.getElementById('analysisContainer');

            // Ensure the container is visible if it was hidden
            if (analysisContainer.style.display === 'none') analysisContainer.style.display = 'block';

            if (panel.style.display === 'block') {
                panel.style.display = 'none';
            } else {
                panel.style.display = 'block';
                // Scroll to panel for better UX
                panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // filterSurahs function removed as it is obsolete for the auto-complete UI

        function updateVerseDropdown(surahNum) {
            const verseSelect = document.getElementById('verseSelect');
            const container = document.getElementById('verseSelectContainer');
            const count = surahVerseCount[surahNum];

            verseSelect.innerHTML = '<option value="" disabled selected>Ayet...</option>';

            for (let i = 1; i <= count; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                verseSelect.appendChild(option);
            }

            container.classList.add('active');
        }

        function scrollToVerse() {
            const verseNum = document.getElementById('verseSelect').value;
            const target = document.querySelector(`.arabic-line[data-ayah="${verseNum}"]`);
            if (target) {
                target.closest('.verse-card').scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Highlight effect
                const card = target.closest('.verse-card');
                const originalBorder = card.style.borderRight;
                card.style.borderRight = '10px solid var(--accent)';
                card.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    card.style.borderRight = originalBorder;
                    card.style.transform = 'scale(1)';
                }, 1500);
            }
        }

        async function loadSurah(surahNum) {
            if (!surahNum) return;
            const content = document.getElementById('contentArea');
            const spinner = document.getElementById('loadingSpinner');

            // Analiz panelini ve Ayet Dropdown'u g√ºncelle
            showMiracleInsights(surahNum);
            updateVerseDropdown(surahNum);

            content.innerHTML = '';
            spinner.style.display = 'block';

            try {
                const count = surahVerseCount[surahNum];
                const basmalaStr = "ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸéŸáŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê";

                for (let i = 1; i <= count; i++) {
                    const data = await fetchAyah(surahNum, i);
                    if (!data) continue;

                    let arabicDisplay = data.arabic;

                    // 1. Ayet i≈ülemi: Eƒüer metin Besmele ile ba≈ülƒ±yorsa ve bu Fatiha/Tevbe deƒüilse
                    if (i === 1 && surahNum !== 1 && surahNum !== 9) {
                        if (arabicDisplay.includes(basmalaStr)) {
                            const bHeader = document.createElement('div');
                            bHeader.className = 'basmala-header';
                            bHeader.textContent = basmalaStr;
                            content.appendChild(bHeader);

                            const bTurkish = document.createElement('div');
                            bTurkish.className = 'basmala-turkish';
                            bTurkish.textContent = "Rahman ve Rahim olan Allah'ƒ±n adƒ±yla";
                            content.appendChild(bTurkish);

                            // Ayet metninden Besmele'yi temizle
                            arabicDisplay = arabicDisplay.replace(basmalaStr, "").trim();
                        }
                    }

                    const card = document.createElement('div');
                    card.className = 'verse-card';
                    card.innerHTML = `
                        <div class="arabic-line" data-ayah="${i}">${arabicDisplay}</div>
                        <div class="turkish-line">
                            <span class="verse-number">${surahNum}:${i}</span>
                            ${data.turkish}
                        </div>
                    `;
                    content.appendChild(card);
                }

                // T√ºm ayetler y√ºklendikten sonra tooltip'leri ba≈ülat
                if (window.initWordTooltips) await initWordTooltips(surahNum);

            } catch (err) {
                content.innerHTML = `<div class="error-msg">Sure y√ºklenirken bir hata olu≈ütu: ${err.message}</div>`;
            } finally {
                spinner.style.display = 'none';
            }
        }

        // Tema deƒüi≈ütirme
        function toggleTheme() {
            const body = document.body;
            const icon = document.getElementById('themeIcon');
            const text = document.getElementById('themeText');

            if (body.classList.contains('night-mode')) {
                body.classList.remove('night-mode');
                icon.textContent = 'üåô';
                text.textContent = 'Gece Modu';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('night-mode');
                icon.textContent = '‚òÄÔ∏è';
                text.textContent = 'G√ºnd√ºz Modu';
                localStorage.setItem('theme', 'night');
            }
        }

        // Kelime sayƒ±larƒ±nƒ± a√ß/kapat
        function toggleWordCounts() {
            const body = document.body;
            const isChecked = document.getElementById('countToggle').checked;

            if (isChecked) {
                body.classList.add('show-word-counts');
                localStorage.setItem('showWordCounts', 'true');
            } else {
                body.classList.remove('show-word-counts');
                localStorage.setItem('showWordCounts', 'false');
            }
        }

        // Ebced Modalƒ±nƒ± a√ß/kapat
        function toggleEbcedModal() {
            const modal = document.getElementById('ebcedModal');
            if (modal.style.display === 'block') {
                modal.style.display = 'none';
            } else {
                modal.style.display = 'block';
            }
        }

        // Ebced Detay Modalƒ±nƒ± a√ß/kapat
        function toggleEbcedDetailModal(surahNum = null) {
            const modal = document.getElementById('ebcedDetailModal');
            const body = document.getElementById('ebcedDetailBody');
            const title = document.getElementById('ebcedModalTitle');

            if (modal.style.display === 'block') {
                modal.style.display = 'none';
                return;
            }

            const globalStats = (typeof SURAH_STATS !== 'undefined') ? SURAH_STATS : (window.SURAH_STATS || null);
            if (surahNum && globalStats && globalStats[surahNum]) {
                const stats = globalStats[surahNum];
                const sName = surahNames[surahNum - 1];
                title.textContent = `${sName} Suresi Ebced D√∂k√ºm√º`;
                body.innerHTML = '';

                stats.verses.forEach(v => {
                    const tr = document.createElement('tr');
                    let label = `${v.v}. Ayet`;
                    if (surahNum === 1 && v.v === 1) label += " (Besmele)";

                    tr.innerHTML = `<td>${label}</td><td>${v.e.toLocaleString('tr-TR')}</td>`;
                    body.appendChild(tr);
                });

                // Toplam satƒ±rƒ±
                const totalTr = document.createElement('tr');
                totalTr.style.fontWeight = 'bold';
                totalTr.style.color = 'var(--accent)';
                totalTr.style.background = 'rgba(39, 174, 96, 0.1)';
                totalTr.innerHTML = `<td>TOPLAM</td><td>${stats.ebced.toLocaleString('tr-TR')}</td>`;
                body.appendChild(totalTr);

                modal.style.display = 'block';
            }
        }



        // Aktif tooltip'i takip etmek i√ßin global deƒüi≈üken
        let activeTooltipId = null;

        function closeAllTooltips() {
            // T√ºm a√ßƒ±k tooltip'leri kapat
            const tooltips = document.querySelectorAll('[id$="Tooltip"]');
            tooltips.forEach(t => {
                if (t.style.display === 'block') {
                    t.style.display = 'none';
                }
            });
            activeTooltipId = null;
        }

        function showGenericWordTooltip(event, tooltipId, title, dataArray, highlightWord) {
            event.stopPropagation();

            // Eƒüer aynƒ± tooltip zaten a√ßƒ±ksa kapat
            let tooltip = document.getElementById(tooltipId);
            if (tooltip && tooltip.style.display === 'block') {
                tooltip.style.display = 'none';
                activeTooltipId = null;
                return;
            }

            // Diƒüer t√ºm tooltip'leri kapat (√ºst √ºste binmeyi √∂nle)
            closeAllTooltips();

            if (!tooltip) {
                tooltip = document.createElement('div');
                tooltip.id = tooltipId;
                tooltip.style.cssText = `position: fixed; background: var(--card-bg); border: 3px solid var(--accent); border-radius: 12px; padding: 20px; max-width: 500px; max-height: 500px; overflow-y: auto; box-shadow: 0 8px 24px rgba(0,0,0,0.4); z-index: 10000; font-size: 12px; color: var(--text-main); left: 50%; top: 50%; transform: translate(-50%, -50%);`;
                document.body.appendChild(tooltip);

                document.addEventListener('click', (e) => {
                    // Tooltip dƒ±≈üƒ±na tƒ±klandƒ±ƒüƒ±nda...
                    // AMA: Verse preview modalƒ± a√ßƒ±ksa veya tƒ±klanan yer modalƒ±n i√ßindeyse KAPATMA
                    const versePreview = document.getElementById('versePreview');
                    const isVersePreviewOpen = versePreview && versePreview.style.display === 'block';
                    const isClickInsideModal = versePreview && versePreview.contains(e.target);

                    if (tooltip && !tooltip.contains(e.target) && tooltip.style.display === 'block') {
                        // Eƒüer modal a√ßƒ±ksa veya modalƒ±n i√ßine tƒ±klandƒ±ysa (√∂rn: kapat butonu) kapatma
                        if (!isVersePreviewOpen && !isClickInsideModal) {
                            tooltip.style.display = 'none';
                            if (activeTooltipId === tooltipId) activeTooltipId = null;
                        }
                    }
                });
            }

            if (!dataArray || dataArray.length === 0) {
                tooltip.innerHTML = `<div style="text-align:center; padding:10px;">${title} verisi y√ºklenemedi.</div>`;
                tooltip.style.display = 'block';
                activeTooltipId = tooltipId;
                return;
            }

            let html = '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">';
            html += `<div style="font-weight: bold; color: var(--accent); font-size: 14px;">${title} (${dataArray.length})</div>`;
            html += `<span onclick="document.getElementById('${tooltipId}').style.display='none'; activeTooltipId=null;" style="cursor: pointer; font-size: 24px; color: var(--text-secondary); line-height: 1; padding: 0 5px;">&times;</span>`;
            html += '</div>';

            html += '<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(65px, 1fr)); gap: 6px; font-size: 11px;">';
            dataArray.forEach((loc) => {
                const isHeader = loc.h === 1;
                const label = isHeader ? `${loc.s}:B` : `${loc.s}:${loc.a}`;
                const word = loc.w || highlightWord || '';
                const wordEscaped = word.replace(/'/g, "\\'");

                // Ayet a√ßƒ±lƒ±nca tooltip KAPATILMIYOR artƒ±k
                const onclick = `navigateToVerse(${loc.s}, ${isHeader ? 1 : loc.a}, '${wordEscaped}', ${isHeader});`;

                const bg = isHeader ? "rgba(241, 196, 15, 0.15)" : "rgba(39,174,96,0.15)";
                html += `<div onclick="${onclick}" style="padding: 5px; background: ${bg}; border-radius: 4px; text-align: center; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='rgba(39,174,96,0.35)'" onmouseout="this.style.background='${bg}'">${label}</div>`;
            });
            html += '</div>';
            html += '<div style="margin-top: 10px; font-size: 10px; color: var(--text-secondary); text-align: center; border-top: 1px solid var(--border-color); padding-top: 8px;">B = Surenin Besmelesi</div>';

            tooltip.innerHTML = html;
            tooltip.style.display = 'block';
            activeTooltipId = tooltipId;
        }

        // Tooltip specialized functions
        function showAllahTooltip(event) { showGenericWordTooltip(event, 'allahTooltip', '‚ò™Ô∏è Allah', typeof allahData !== 'undefined' ? allahData : [], 'ÿßŸÑŸÑŸá'); }
        function hideAllahTooltip() { const t = document.getElementById('allahTooltip'); if (t) t.style.display = 'none'; }

        function showRahmanTooltip(event) { showGenericWordTooltip(event, 'rahmanTooltip', 'üìñ Rahman Kelimesi', typeof rahmanData !== 'undefined' ? rahmanData : [], 'ÿ±ÿ≠ŸÖŸ∞ŸÜ'); }
        function hideRahmanTooltip() { const t = document.getElementById('rahmanTooltip'); if (t) t.style.display = 'none'; }

        function showRahimTooltip(event) { showGenericWordTooltip(event, 'rahimTooltip', 'üìñ Rahim Kelimesi', typeof rahimData !== 'undefined' ? rahimData : [], 'ÿ±ÿ≠ŸäŸÖ'); }
        function hideRahimTooltip() { const t = document.getElementById('rahimTooltip'); if (t) t.style.display = 'none'; }

        function showJannahTooltip(event) { showGenericWordTooltip(event, 'jannahTooltip', 'üèûÔ∏è Cennet Kelimesi', typeof jannahData !== 'undefined' ? jannahData : [], 'ÿ¨ŸÜÿ©'); }
        function hideJannahTooltip() { const t = document.getElementById('jannahTooltip'); if (t) t.style.display = 'none'; }

        function showJahannamTooltip(event) { showGenericWordTooltip(event, 'jahannamTooltip', 'üî• Cehennem Kelimesi', typeof jahannamData !== 'undefined' ? jahannamData : [], 'ÿ¨ŸáŸÜŸÖ'); }
        function hideJahannamTooltip() { const t = document.getElementById('jahannamTooltip'); if (t) t.style.display = 'none'; }

        function showAngelTooltip(event) { showGenericWordTooltip(event, 'angelTooltip', 'üëº Melek Kelimesi', typeof angelData !== 'undefined' ? angelData : [], 'ŸÖŸÑÿ¶ŸÉÿ©'); }
        function hideAngelTooltip() { const t = document.getElementById('angelTooltip'); if (t) t.style.display = 'none'; }

        function showSatanTooltip(event) { showGenericWordTooltip(event, 'satanTooltip', 'üòà ≈ûeytan Kelimesi', typeof satanData !== 'undefined' ? satanData : [], 'ÿ¥Ÿäÿ∑ÿßŸÜ'); }
        function hideSatanTooltip() { const t = document.getElementById('satanTooltip'); if (t) t.style.display = 'none'; }

        // Core Navigation Function
        async function navigateToVerse(surahNum, verseNum, highlightWord = '', isHeader = false) {
            console.log('navigateToVerse called:', { surahNum, verseNum, highlightWord, isHeader });

            const sInt = parseInt(surahNum);
            const vInt = parseInt(verseNum);

            let modal = document.getElementById('versePreview');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'versePreview';
                modal.className = 'verse-preview-modal';
                document.body.appendChild(modal);
            }

            modal.style.display = 'block';
            modal.innerHTML = `<div style="display: flex; justify-content: center; align-items: center; height: 100px;"><div class="loading-spinner"></div></div>`;

            try {
                const data = await fetchAyah(sInt, vInt, isHeader);
                if (!data) throw new Error("Ayet verisi alƒ±namadƒ±.");

                let arabicText = data.arabic;
                if (highlightWord) {
                    const normalize = (text) => text.replace(/[\u0640\u064B-\u065F\u0670\u06D6-\u06ED\u06E1\u0653-\u0655]/g, '');
                    const normalizedSearch = normalize(highlightWord).trim();

                    if (normalizedSearch) {
                        let pattern = '';
                        // Create a pattern that allows harakat between characters
                        for (let char of normalizedSearch) {
                            // If char itself is a diacritic, skip it in pattern construction if accidentally passed
                            if (char.match(/[\u0640\u064B-\u065F\u0670\u06D6-\u06ED\u06E1\u0653-\u0655]/)) continue;

                            // Handle Alef/Alif variants: Standardize lookup for Alif (\u0627) to match Alef Wasla (\u0671) too
                            if (char === '\u0627') {
                                pattern += '[\u0627\u0671\u0622\u0623\u0625]'; // Match bare Alif, Alef Wasla, Madda, Hamza Above/Below
                            } else {
                                // Escape regex special chars
                                const escapedChar = char.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                                pattern += escapedChar;
                            }

                            // Allow optional diacritics after the character
                            pattern += '[\\u0640\\u064B-\\u065F\\u0670\\u06D6-\\u06ED\\u06E1\\u0653-\\u0655]*';
                        }

                        // Use simple replacement but verify strict match of skeleton
                        const regex = new RegExp(pattern, 'g');
                        arabicText = arabicText.replace(regex, (match) => {
                            const normMatch = normalize(match);
                            // Strict check: mismatched length or content implies partial match
                            if (normMatch === normalizedSearch) {
                                return `<span class="highlighted-word">${match}</span>`;
                            }
                            return match;
                        });
                    }
                }

                const displayName = isHeader ? `${surahNames[sInt - 1]} (Besmele)` : `${surahNames[sInt - 1]} ${sInt}:${vInt}`;

                modal.innerHTML = `
                    <div class="verse-preview-header">
                        <div class="verse-preview-title">üìñ ${displayName}</div>
                        <span class="close-btn" onclick="hideVersePreview()">&times;</span>
                    </div>
                    <div class="verse-preview-arabic">${arabicText}</div>
                    <div class="verse-preview-turkish">${data.turkish}</div>
                    <div class="verse-preview-actions">
                        <button class="primary-btn" onclick="hideVersePreview(); loadSurah(${sInt}).then(() => setTimeout(() => { const el = document.querySelector('.arabic-line[data-ayah=\\'${vInt}\\']'); if(el) el.closest('.verse-card').scrollIntoView({behavior:'smooth',block:'center'}); }, 500));">üìú T√ºm Sureyi A√ß</button>
                        <button class="secondary-btn" onclick="hideVersePreview()">Kapat</button>
                    </div>
                `;
            } catch (error) {
                console.error('Error in navigateToVerse:', error);
                modal.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #e74c3c;">
                        ‚ùå Hata: ${error.message}
                        <button onclick="hideVersePreview()" style="margin-top: 15px; background: var(--accent); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">Kapat</button>
                    </div>
                `;
            }
        }

        // Shams (Sun) Tooltip
        function showShamsTooltip(event) {
            showGenericWordTooltip(event, 'shamsTooltip', '‚òÄÔ∏è G√ºne≈ü (≈ûems) Kelimesi', typeof shamsData !== 'undefined' ? shamsData : [], 'ÿ¥ŸÖÿ≥');
        }

        // Qamar (Moon) Tooltip
        function showQamarTooltip(event) {
            showGenericWordTooltip(event, 'qamarTooltip', 'üåô Ay (Kamer) Kelimesi', typeof qamarData !== 'undefined' ? qamarData : [], 'ŸÇŸÖÿ±');
        }

        // Shehr (Month) Tooltip
        function showShehrTooltip(event) {
            showGenericWordTooltip(event, 'shehrTooltip', 'üìÖ Ay (≈ûehr) Kelimesi', typeof shehrData !== 'undefined' ? shehrData : [], 'ÿ¥Ÿáÿ±');
        }

        // Yevm (Day) Tooltip
        function showYevmTooltip(event) {
            showGenericWordTooltip(event, 'yevmTooltip', 'üìÜ G√ºn (Yevm) Kelimesi', typeof yevmData !== 'undefined' ? yevmData : [], 'ŸäŸàŸÖ');
        }

        // Allah Tooltip
        function showAllahTooltip(event) {
            showGenericWordTooltip(event, 'allahTooltip', '‚ò™Ô∏è Allah (Lafza-i Celal)', allahData, 'ÿßŸÑŸÑŸá');
        }
        function hideAllahTooltip() {
            const t = document.getElementById('allahTooltip'); if (t) t.style.display = 'none';
        }

        // Adem Tooltip
        function showAdemTooltip(event) {
            showGenericWordTooltip(event, 'ademTooltip', 'üë® Adem (ÿ¢ÿØŸÖ) Kelimesi', typeof ademData !== 'undefined' ? ademData : [], 'ÿ¢ÿØŸÖ');
        }

        // ƒ∞sa Tooltip
        function showIsaTooltip(event) {
            showGenericWordTooltip(event, 'isaTooltip', '‚úùÔ∏è ƒ∞sa (ÿπŸäÿ≥Ÿâ) Kelimesi', typeof isaData !== 'undefined' ? isaData : [], 'ÿπŸäÿ≥Ÿâ');
        }

        // Musa Tooltip
        function showMusaTooltip(event) {
            showGenericWordTooltip(event, 'musaTooltip', 'üåä Musa (ŸÖŸàÿ≥Ÿâ) Kelimesi', typeof musaData !== 'undefined' ? musaData : [], 'ŸÖŸàÿ≥Ÿâ');
        }

        // G√∂lge Tooltip
        function showZilTooltip(event) {
            showGenericWordTooltip(event, 'zilTooltip', '‚òÅÔ∏è G√∂lge (ÿ∏ŸÑ) Kelimesi', typeof zilData !== 'undefined' ? zilData : [], 'ÿ∏ŸÑ');
        }

        // Arƒ± Tooltip
        function showNahlTooltip(event) {
            showGenericWordTooltip(event, 'nahlTooltip', 'üêù Arƒ± (ŸÜÿ≠ŸÑ) Kelimesi', typeof nahlData !== 'undefined' ? nahlData : [], 'ŸÜÿ≠ŸÑ');
        }

        // Load Surah avec la mise en √©vidence des lettres Mukatta
        async function loadSurahWithMukattaHighlight(surahNum, mukattaLetters) {
            // Close miracle panel first so user can see the loaded surah
            const miraclePanel = document.getElementById('miraclePanel');
            if (miraclePanel && miraclePanel.style.display === 'block') {
                miraclePanel.style.display = 'none';
            }

            // Load the surah first
            await loadSurah(surahNum);

            // Scroll to content area (not top of page) after loading
            const contentArea = document.getElementById('contentArea');
            if (contentArea) {
                contentArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            // Wait a bit for the surah to be fully loaded
            setTimeout(() => {
                if (!mukattaLetters || mukattaLetters === '') return;

                // Parse the letters
                const letters = mukattaLetters.split(',').filter(l => l.trim());
                if (letters.length === 0) return;

                // Function to normalize Arabic text (remove diacritics but keep consonants)
                function normalizeArabic(text) {
                    const diacritics = /[\u064B-\u065F\u0670\u06D6-\u06ED\u0640\u0653-\u0655]/g;
                    return text.replace(diacritics, '');
                }

                // Create counters for each letter type
                const letterCounters = {};
                letters.forEach(letter => {
                    const normalized = normalizeArabic(letter.trim());
                    if (normalized) {
                        letterCounters[normalized] = 0;
                    }
                });

                // Get all Arabic lines
                const arabicLines = document.querySelectorAll('.arabic-line');

                arabicLines.forEach(line => {
                    let html = line.innerHTML;

                    // For each Mukatta letter, highlight it with counter
                    letters.forEach(letter => {
                        const normalizedLetter = normalizeArabic(letter.trim());
                        if (!normalizedLetter) return;

                        // Create a regex that matches the letter with optional diacritics
                        // Handle Alef variants
                        let pattern;
                        if (normalizedLetter === 'ÿß') {
                            pattern = '[ÿßŸ±ÿ£ÿ•ÿ¢][\\u064B-\\u065F\\u0670\\u06D6-\\u06ED\\u0640\\u0653-\\u0655]*';
                        } else {
                            const escapedLetter = normalizedLetter.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                            pattern = escapedLetter + '[\\u064B-\\u065F\\u0670\\u06D6-\\u06ED\\u0640\\u0653-\\u0655]*';
                        }

                        const regex = new RegExp(pattern, 'g');
                        html = html.replace(regex, (match) => {
                            // Don't highlight if already highlighted or inside a tag
                            if (html.indexOf(`<span class="mukatta-highlight"`) !== -1 &&
                                html.indexOf(`>${match}</span>`) !== -1) {
                                return match;
                            }
                            // Increment counter for this letter type
                            letterCounters[normalizedLetter]++;
                            const count = letterCounters[normalizedLetter];
                            return `<span class="mukatta-highlight" data-mukatta-index="${count}" data-mukatta-letter="${normalizedLetter}">${match}</span>`;
                        });
                    });

                    line.innerHTML = html;
                });

                // Log final counts
                console.log(`‚ú® Mukatta harfleri vurgulandƒ±: ${letters.join(', ')}`);
                console.log(`üìä Toplam ${arabicLines.length} satƒ±r i≈ülendi`);
                console.log(`üìà Harf sayƒ±larƒ±:`, letterCounters);
            }, 1000); // Wait 1 second for surah to load
        }

        function hideVersePreview() {
            const preview = document.getElementById('versePreview');
            if (preview) {
                preview.style.display = 'none';
            }
        }

        // Modal dƒ±≈üƒ±na tƒ±klayƒ±nca kapat
        window.addEventListener('click', function (event) {
            const ebcedModal = document.getElementById('ebcedModal');
            const detailModal = document.getElementById('ebcedDetailModal');
            const versePreview = document.getElementById('versePreview');
            if (event.target == ebcedModal) ebcedModal.style.display = 'none';
            if (event.target == detailModal) detailModal.style.display = 'none';
            // versePreview modalƒ± i√ßin dƒ±≈üƒ±na tƒ±klama ile kapatma - ama tooltip'e dokunmadan
            if (event.target == versePreview) versePreview.style.display = 'none';
        });

        // Sayfa y√ºklendiƒüinde ayarlarƒ± hatƒ±rla
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'night') {
                document.body.classList.add('night-mode');
                const icon = document.getElementById('themeIcon');
                const text = document.getElementById('themeText');
                if (icon) icon.textContent = '‚òÄÔ∏è';
                if (text) text.textContent = 'G√ºnd√ºz Modu';
            }

            const savedCount = localStorage.getItem('showWordCounts');
            if (savedCount === 'true') {
                document.getElementById('countToggle').checked = true;
                document.body.classList.add('show-word-counts');
            }
        });
    </script>
    <script src="allah_data.js"></script>
    <script src="rahman_rahim_data.js"></script>
    <script src="angel_data_with_words.js"></script>
    <script src="satan_data_with_words.js"></script>
    <script src="jannah_data_raw.js"></script>
    <script src="jahannam_data_raw.js"></script>
    <script src="shams_qamar_yevm_shehr_data.js"></script>
    <script src="afterlife_days_data.js"></script>
    <script src="mukatta_data.js"></script>
    <script src="adem_data.js"></script>
    <script src="isa_musa_data.js"></script>
    <script src="zil_data.js"></script>
    <script src="nahl_data.js"></script>
    <script src="afterlife_days_data.js"></script>
    <script>
        function toggleMukattaTable() {
            const area = document.getElementById('mukattaTableArea');
            const icon = document.getElementById('mukattaToggleIcon');
            const tbody = document.getElementById('mukattaTableBody');

            if (area.style.display === 'none') {
                area.style.display = 'block';
                icon.textContent = '‚ñ≤';

                // Always try to populate when opening to ensure data is there
                tbody.innerHTML = '';

                if (typeof mukattaData !== 'undefined') {
                    mukattaData.forEach(row => {
                        const tr = document.createElement('tr');
                        // Extract just the Arabic letters from the start field for highlighting
                        const mukattaLetters = row.start.split(' ').filter(word => /[\u0600-\u06FF]/.test(word)).join(',');
                        tr.innerHTML = `
                            <td style="padding: 6px; border: 1px solid var(--border-color);">
                                <span onclick="loadSurahWithMukattaHighlight(${row.id}, '${mukattaLetters}')" 
                                      style="cursor: pointer; color: var(--accent); text-decoration: underline; font-weight: 600;"
                                      onmouseover="this.style.opacity='0.7'" 
                                      onmouseout="this.style.opacity='1'">
                                    ${row.name}
                                </span>
                            </td>
                            <td style="padding: 6px; text-align: center; border: 1px solid var(--border-color);">${row.id}</td>
                            <td style="padding: 6px; border: 1px solid var(--border-color); font-weight: 500;">${row.start}</td>
                            <td style="padding: 6px; border: 1px solid var(--border-color); font-family: monospace; font-size: 10px;">${row.counts}</td>
                            <td style="padding: 6px; border: 1px solid var(--border-color); font-family: monospace; font-size: 10px; color: #888;">${row.basmala}</td>
                            <td style="padding: 6px; border: 1px solid var(--border-color); font-family: monospace; font-size: 10px; color: var(--accent);">${row.surahFreq}</td>
                            <td style="padding: 6px; border: 1px solid var(--border-color); font-family: monospace; font-size: 10px; color: var(--primary); font-weight: 700;">${row.grandTotal}</td>
                        `;
                        tbody.appendChild(tr);
                    });
                } else {
                    tbody.innerHTML = '<tr><td colspan="7" style="padding:10px; text-align:center;">Veri y√ºklenemedi (mukattaData tanimsiz).</td></tr>';
                }
            } else {
                area.style.display = 'none';
                icon.textContent = '‚ñº';
            }
        }
    </script>
    <script src="quran_arabic_js.js"></script>
    <script src="quran_tr_js.js"></script>



    <!-- Demir Detay Modalƒ± -->
    <div id="ironModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close-btn" onclick="toggleIronModal()">&times;</span>
            <h2 class="analysis-title">‚öôÔ∏è Demir (Hadid) Mucizeleri</h2>
            <div style="line-height: 1.6; font-size: 15px;">
                <p>Demir (<strong>Hadid</strong>) ile ilgili Kur'an'daki ≈üa≈üƒ±rtƒ±cƒ± sayƒ±sal ve bilimsel uyumlar:</p>

                <div class="category-block" style="padding: 15px;">
                    <h3 style="color: var(--accent); margin-top: 0;">1. Ebced ve Atom Numarasƒ± Uyumu</h3>
                    <ul>
                        <li><strong>Hadid (ÿ≠ÿØŸäÿØ) Ebced Deƒüeri: 26</strong>
                            <br><em>Bilimsel Kar≈üƒ±lƒ±k:</em> Demirin atom numarasƒ± <strong>26</strong>'dƒ±r.
                        </li>
                        <li><strong>el-Hadid (ÿßŸÑÿ≠ÿØŸäÿØ) Ebced Deƒüeri: 57</strong>
                            <br><em>Sayƒ±sal Kar≈üƒ±lƒ±k:</em> Hadid Suresi, Kur'an-ƒ± Kerim'in <strong>57.
                                suresidir</strong>.
                        </li>
                    </ul>
                </div>

                <div class="category-block" style="padding: 15px;">
                    <h3 style="color: var(--accent); margin-top: 0;">2. ƒ∞zotop ve Sure Numarasƒ± Uyumu</h3>
                    <ul>
                        <li><strong>Demir-57 ƒ∞zotopu:</strong> Demirin doƒüada bulunan 4 kararlƒ± izotopundan biridir.
                        </li>
                        <li>Bu izotopun k√ºtle numarasƒ± olan <strong>57</strong>, Hadid Suresi'nin Kur'an'daki
                            <strong>sƒ±ra numarasƒ± (57)</strong> ile birebir √∂rt√º≈ü√ºr.
                        </li>
                    </ul>
                    <div class="error-msg"
                        style="background: rgba(39, 174, 96, 0.1); border-color: var(--accent); color: var(--text-main); font-size: 13px;">
                        <strong>√ñNEMLƒ∞:</strong> Hem surenin numarasƒ±, hem izotopun k√ºtle numarasƒ±, hem de "el-Hadid"
                        kelimesinin ebced deƒüeri <strong>57</strong>'dir.
                    </div>
                </div>

                <div class="category-block" style="padding: 15px;">
                    <h3 style="color: var(--accent); margin-top: 0;">3. Bilimsel Mucize: Demirin "ƒ∞ndirilmesi"</h3>
                    <p><strong>Ayet (57:25):</strong> "...Ve demiri de <strong>indirdik (enze'ln√¢)</strong>..."</p>
                    <p><strong>Bilimsel Ger√ßek:</strong> Demir, D√ºnya'da olu≈üamaz. Sadece devasa yƒ±ldƒ±zlarƒ±n (s√ºpernova)
                        patlamasƒ±yla olu≈üur ve uzaydan meteorlar yoluyla D√ºnya'ya <strong>"indirilmi≈ütir"</strong>.
                        Kur'an bu geli≈ü bi√ßimini "indirdik" kelimesiyle 1400 yƒ±l √∂nceden haber vermi≈ütir.</p>
                </div>

                <div class="category-block" style="padding: 15px;">
                    <h3 style="color: var(--accent); margin-top: 0;">4. Kur'an'ƒ±n Merkezi</h3>
                    <p>Kur'an'da toplam <strong>114</strong> sure vardƒ±r. Hadid Suresi (<strong>57</strong>), Kur'an'ƒ±n
                        tam matematiksel <strong>merkezidir</strong> (114 / 2 = 57). Tƒ±pkƒ± demir elementinin D√ºnya'nƒ±n
                        merkezinde yer almasƒ± gibi.</p>
                </div>
            </div>
        </div>
    </div>


    <!-- Akƒ±l ve Namaz Panel -->
    <div id="akilNamazPanel" class="analysis-panel"
        style="display: none; margin: 20px auto; max-width: 800px; border: 2px solid #9b59b6; border-radius: 12px; padding: 20px; background: var(--card-bg);">
        <div class="analysis-title" style="color: #9b59b6; font-size: 20px; margin-bottom: 15px;">üß† Akƒ±l, D√º≈ü√ºnce ve
            Namaz Analizi</div>

        <div
            style="margin-bottom: 20px; font-size: 13px; color: var(--text-secondary); line-height: 1.5; border-bottom: 1px dashed var(--border-color); padding-bottom: 10px;">
            <strong>Kuran'da Akƒ±l ve D√º≈ü√ºncenin √ñnemi:</strong> Kuran-ƒ± Kerim, insanlarƒ± defalarca d√º≈ü√ºnmeye, akƒ±llarƒ±nƒ±
            kullanmaya, tefekk√ºr etmeye ve atalarƒ±n k√∂r√º k√∂r√ºne taklit edilmemesine √ßaƒüƒ±rƒ±r. Bu panel, akƒ±l kullanmayƒ±
            te≈üvik eden ve namazƒ±n √∂z√ºn√º anlatan ayetleri bir araya getirmektedir.
        </div>

        <!-- Akƒ±l ve D√º≈ü√ºnce Kartƒ± -->
        <div class="category-card"
            style="margin-bottom: 15px; border: 1px solid var(--border-color); border-radius: 10px; padding: 15px;">
            <div class="category-header"
                style="font-weight: bold; color: #9b59b6; margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                <span>üß† Akƒ±l ve D√º≈ü√ºnce Ayetleri</span>
                <span class="insight-count-badge" style="background: #9b59b6;">223</span>
            </div>
            <p style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px;">
                ŸäŸéÿπ€°ŸÇŸêŸÑŸèŸàŸÜŸé (akletmek), ŸäŸéÿ™ŸéŸÅŸéŸÉŸéŸëÿ±ŸèŸàŸÜŸé (d√º≈ü√ºnmek), ŸäŸéÿπ€°ŸÑŸéŸÖŸèŸàŸÜŸé (bilmek), ŸäŸéŸÅ€°ŸÇŸéŸáŸèŸàŸÜŸé (kavramak),
                ÿ£ŸèŸàŸíŸÑŸèŸàÿßŸí Ÿ±ŸÑ€°ÿ£ŸéŸÑ€°ÿ®ŸéŸ∞ÿ®Ÿê (akƒ±l sahipleri)
            </p>
            <ul id="akilVerseList" class="insight-list" style="max-height: 300px; overflow-y: auto;">
                <li class="insight-item"><span class="insight-label">Y√ºkleniyor...</span></li>
            </ul>
        </div>

        <!-- Namaz Kartƒ± -->
        <div class="category-card"
            style="margin-bottom: 15px; border: 1px solid var(--border-color); border-radius: 10px; padding: 15px;">
            <div class="category-header"
                style="font-weight: bold; color: #27ae60; margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                <span>üïå Namaz Ayetleri</span>
                <span class="insight-count-badge" style="background: #27ae60;">29</span>
            </div>
            <p style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px;">
                Ÿ±ŸÑÿµŸéŸëŸÑŸéŸàŸ∞ÿ©Ÿé (namaz), ÿµŸéŸÑŸèŸëŸàŸíÿß (namaz kƒ±lƒ±n), ŸäŸèŸÇŸêŸäŸÖŸèŸàŸÜŸé Ÿ±ŸÑÿµŸéŸëŸÑŸéŸàŸ∞ÿ©Ÿé (namazƒ± dosdoƒüru kƒ±larlar)
            </p>
            <ul id="namazVerseList" class="insight-list" style="max-height: 300px; overflow-y: auto;">
                <li class="insight-item"><span class="insight-label">Y√ºkleniyor...</span></li>
            </ul>
        </div>

        <!-- √ñnemli Not -->
        <div
            style="background: rgba(155, 89, 182, 0.1); border-left: 4px solid #9b59b6; padding: 15px; border-radius: 8px; font-size: 13px; line-height: 1.6;">
            <strong style="color: #9b59b6;">üìñ √ñnemli Not:</strong><br>
            Kuran'da namazƒ±n √∂z√º Allah'ƒ± anmak, O'na yalvarmak ve doƒüru yola y√∂nelmektir. Kuran, namazƒ±n ruhunu ve
            √∂nemini vurgularken, aklƒ± kullanmayƒ± ve k√∂r√º k√∂r√ºne taklitten ka√ßƒ±nmayƒ± emreder.
        </div>
    </div>

    <!-- Scriptleri en sona ekliyoruz -->
    <script>
        function toggleIronModal() {
            const modal = document.getElementById('ironModal');
            if (modal.style.display === 'block') {
                modal.style.display = 'none';
            } else {
                modal.style.display = 'block';
            }
        }

        // Modal dƒ±≈üƒ±na tƒ±klayƒ±nca kapatma
        window.onclick = function (event) {
            const ironModal = document.getElementById('ironModal');
            if (event.target == ironModal) {
                ironModal.style.display = "none";
            }
            // Mevcut modal kapatma kodu (override etmemek i√ßin buraya ekliyoruz)
            const modal = document.getElementById('ebcedModal');
            if (modal && event.target == modal) {
                modal.style.display = "none";
            }
            const verseModal = document.getElementById('versePreviewModal');
            if (verseModal && event.target == verseModal) {
                verseModal.style.display = "none";
            }
        }

        // Akƒ±l ve Namaz Panel Toggle
        function toggleAkilNamazPanel() {
            const panel = document.getElementById('akilNamazPanel');
            const btn = document.getElementById('akilNamazToggle');
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'block';
                btn.style.background = '#9b59b6';
                btn.style.color = 'white';
                populateAkilNamazPanel();
            } else {
                panel.style.display = 'none';
                btn.style.background = 'var(--card-bg)';
                btn.style.color = '#9b59b6';
            }
        }

        function populateAkilNamazPanel() {
            if (typeof akilData === 'undefined' || typeof namazData === 'undefined') return;

            // Akƒ±l Ayetleri
            const akilList = document.getElementById('akilVerseList');
            if (akilList && akilData.verses) {
                akilList.innerHTML = '';
                akilData.verses.slice(0, 10).forEach(v => {
                    const li = document.createElement('li');
                    li.className = 'insight-item';
                    li.style.cursor = 'pointer';
                    li.innerHTML = `
                        <span class="insight-label">${v.surah}:${v.ayah} - ${v.surahNameTr}</span>
                        <span class="insight-count-badge">${v.keyword}</span>
                    `;
                    li.onclick = () => showAkilNamazVersePreview(v);
                    akilList.appendChild(li);
                });
                if (akilData.verses.length > 10) {
                    const more = document.createElement('li');
                    more.className = 'insight-item';
                    more.innerHTML = `<span class="insight-label" style="color: var(--accent);">+ ${akilData.verses.length - 10} ayet daha...</span>`;
                    akilList.appendChild(more);
                }
            }

            // Namaz Ayetleri
            const namazList = document.getElementById('namazVerseList');
            if (namazList && namazData.verses) {
                namazList.innerHTML = '';
                namazData.verses.slice(0, 10).forEach(v => {
                    const li = document.createElement('li');
                    li.className = 'insight-item';
                    li.style.cursor = 'pointer';
                    li.innerHTML = `
                        <span class="insight-label">${v.surah}:${v.ayah} - ${v.surahNameTr}</span>
                        <span class="insight-count-badge">${v.keyword}</span>
                    `;
                    li.onclick = () => showAkilNamazVersePreview(v);
                    namazList.appendChild(li);
                });
                if (namazData.verses.length > 10) {
                    const more = document.createElement('li');
                    more.className = 'insight-item';
                    more.innerHTML = `<span class="insight-label" style="color: var(--accent);">+ ${namazData.verses.length - 10} ayet daha...</span>`;
                    namazList.appendChild(more);
                }
            }
        }

        function showAkilNamazVersePreview(verse) {
            const modal = document.getElementById('versePreviewModal');
            const title = document.querySelector('.verse-preview-title');
            const arabic = document.querySelector('.verse-preview-arabic');
            const turkish = document.querySelector('.verse-preview-turkish');

            if (modal && title && arabic && turkish) {
                title.textContent = `${verse.surah}:${verse.ayah} - ${verse.surahNameTr} (${verse.keyword})`;
                arabic.textContent = verse.arabic;
                turkish.textContent = verse.turkish || 'T√ºrk√ße meal y√ºklenemedi';
                modal.style.display = 'block';
            }
        }
    </script>
</body>

</html>